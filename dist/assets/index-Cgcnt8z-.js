(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const e of a)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const e={};return a.integrity&&(e.integrity=a.integrity),a.referrerPolicy&&(e.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?e.credentials="include":a.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(a){if(a.ep)return;a.ep=!0;const e=s(a);fetch(a.href,e)}})();function x(n,t){let s=t,l=0;const a=[];a.push({track:s,seek:0,totalSeek:0,requestsLeft:[...n],description:"Start"});const e=[...n];for(let i=0;i<e.length;i++){const d=e[i],p=Math.abs(d-s);l+=p,s=d,a.push({track:d,seek:p,totalSeek:l,requestsLeft:e.slice(i+1),description:`Seek to ${d}`})}return{steps:a,totalSeek:l}}function T(n,t){let s=t,l=0;const a=[];let e=[...n];for(a.push({track:s,seek:0,totalSeek:0,requestsLeft:[...e],description:"Start"});e.length>0;){let i=1/0,d=-1;for(let f=0;f<e.length;f++){const h=Math.abs(e[f]-s);h<i&&(i=h,d=f)}const p=e[d];l+=i,s=p,e.splice(d,1),a.push({track:p,seek:i,totalSeek:l,requestsLeft:[...e],description:`Seek to ${p} (Dist: ${i})`})}return{steps:a,totalSeek:l}}function P(n,t,s=200,l="right"){let a=t,e=0;const i=[];let d=[...n].sort((r,o)=>r-o),p=d.filter(r=>r<t).sort((r,o)=>o-r),f=d.filter(r=>r>=t).sort((r,o)=>r-o),h=[];l==="right"?(h=[...f],p.length>0&&(h.push(s-1),h=[...h,...p])):(h=[...p],f.length>0&&(h.push(0),h=[...h,...f])),i.push({track:a,seek:0,totalSeek:0,requestsLeft:[...n],description:"Start"});let c=new Set;for(let r=0;r<h.length;r++){const o=h[r],u=Math.abs(o-a);u>0&&(e+=u,a=o,n.includes(o)&&c.add(o),i.push({track:o,seek:u,totalSeek:e,requestsLeft:n.filter(S=>!c.has(S)),description:n.includes(o)?`Serve ${o}`:"Scan to End/Start"}))}return{steps:i,totalSeek:e}}function R(n,t,s="right"){let l=t,a=0;const e=[];let i=[...n].sort((c,r)=>c-r),d=i.filter(c=>c<t).sort((c,r)=>r-c),p=i.filter(c=>c>=t).sort((c,r)=>c-r),f=[];s==="right"?f=[...p,...d]:f=[...d,...p],e.push({track:l,seek:0,totalSeek:0,requestsLeft:[...n],description:"Start"});let h=new Set;for(let c=0;c<f.length;c++){const r=f[c],o=Math.abs(r-l);o>0&&(a+=o,l=r,h.add(r),e.push({track:r,seek:o,totalSeek:a,requestsLeft:n.filter(u=>!h.has(u)),description:`Serve ${r}`}))}return{steps:e,totalSeek:a}}function A(n,t,s=200,l="right"){let a=t,e=0;const i=[];let d=[...n].sort((r,o)=>r-o),p=d.filter(r=>r>=t),f=d.filter(r=>r<t),h=[];l==="right"?(h=[...p],f.length>0&&(h.push(s-1),h.push(0),h=[...h,...f])):(h=[...d.filter(r=>r<=t).sort((r,o)=>o-r)],d.filter(r=>r>t).length>0&&(h.push(0),h.push(s-1),h=[...h,...d.filter(r=>r>t).sort((r,o)=>o-r)])),i.push({track:a,seek:0,totalSeek:0,requestsLeft:[...n],description:"Start"});let c=new Set;for(let r=0;r<h.length;r++){const o=h[r];let u=Math.abs(o-a),S=!1;(l==="right"&&a===s-1&&o===0||l==="left"&&a===0&&o===s-1)&&(u=0,S=!0),u>=0&&(e+=u,a=o,n.includes(o)&&c.add(o),i.push({track:o,seek:u,totalSeek:e,requestsLeft:n.filter(g=>!c.has(g)),description:S?"Jump to Start":n.includes(o)?`Serve ${o}`:"Scan"}))}return{steps:i,totalSeek:e}}function M(n,t,s="right"){let l=t,a=0;const e=[];let i=[...n].sort((c,r)=>c-r),d=i.filter(c=>c>=t),p=i.filter(c=>c<t),f=[];if(s==="right")f=[...d,...p];else{let c=i.filter(o=>o<=t).sort((o,u)=>u-o),r=i.filter(o=>o>t).sort((o,u)=>u-o);f=[...c,...r]}e.push({track:l,seek:0,totalSeek:0,requestsLeft:[...n],description:"Start"});let h=new Set;for(let c=0;c<f.length;c++){const r=f[c];let o=Math.abs(r-l),u=!1;s==="right"&&d.length>0&&p.length>0&&l===d[d.length-1]&&r===p[0]&&(o=0,u=!0),s==="right"&&r<l&&(o=0,u=!0),s==="left"&&r>l&&(o=0,u=!0),a+=o,l=r,h.add(r),e.push({track:r,seek:o,totalSeek:a,requestsLeft:n.filter(S=>!h.has(S)),description:u?"Jump":`Serve ${r}`})}return{steps:e,totalSeek:a}}function B(n,t,s=200,l="right",a=4){let e=t,i=0;const d=[];d.push({track:e,seek:0,totalSeek:0,requestsLeft:[...n],description:"Start"});const p=[];for(let c=0;c<n.length;c+=a)p.push(n.slice(c,c+a));const f=new Set;let h=l;for(let c=0;c<p.length;c++){const r=p[c];let o=r.filter(g=>g<e).sort((g,k)=>k-g),u=r.filter(g=>g>=e).sort((g,k)=>g-k),S=[];h==="right"?(S=[...u],o.length>0&&(S.push(s-1),S=[...S,...o])):(S=[...o],u.length>0&&(S.push(0),S=[...S,...u]));for(let g=0;g<S.length;g++){const k=S[g],b=Math.abs(k-e);if(b>=0){i+=b,e=k;const y=r.includes(k);y&&f.add(k),d.push({track:k,seek:b,totalSeek:i,requestsLeft:n.filter(w=>!f.has(w)),description:y?`Serve ${k} [Batch ${c+1}]`:`Scan to End/Start [Batch ${c+1}]`})}}h=h==="right"?"left":"right"}return{steps:d,totalSeek:i}}function O(n,t,s=200,l="right"){let a=t,e=0;const i=[];i.push({track:a,seek:0,totalSeek:0,requestsLeft:[...n],description:"Start"});const d=Math.ceil(n.length/2),p=[n.slice(0,d),n.slice(d)],f=new Set;let h=l;for(let c=0;c<p.length;c++){const r=p[c];if(r.length===0)continue;const o=c===0?"F1 (Active)":"F2 (Deferred)";let u=r.filter(k=>k<a).sort((k,b)=>b-k),S=r.filter(k=>k>=a).sort((k,b)=>k-b),g=[];h==="right"?(g=[...S],u.length>0&&(g.push(s-1),g=[...g,...u])):(g=[...u],S.length>0&&(g.push(0),g=[...g,...S]));for(let k=0;k<g.length;k++){const b=g[k],y=Math.abs(b-a);if(y>=0){e+=y,a=b;const w=r.includes(b);w&&f.add(b),i.push({track:b,seek:y,totalSeek:e,requestsLeft:n.filter(N=>!f.has(N)),description:w?`Serve ${b} [${o}]`:`Scan to End/Start [${o}]`})}}h=h==="right"?"left":"right"}return{steps:i,totalSeek:e}}class ${constructor(t){this.callbacks=t||{},this.state={requests:[],headStart:53,diskSize:200,direction:"right",algorithm:"FCFS",steps:[],totalSeek:0,currentStepIndex:0,progress:0,isPlaying:!1,speed:1,isFinished:!1},this.lastFrameTime=0,this.animationId=null}init(t){this.stop(),this.state.requests=t.requests||[],this.state.headStart=t.headStart||0,this.state.diskSize=t.diskSize||200,this.state.direction=t.direction||"right",this.state.algorithm=t.algorithm||"FCFS",this.calculate(),this.reset()}calculate(){const{algorithm:t,requests:s,headStart:l,diskSize:a,direction:e}=this.state;let i;switch(t){case"FCFS":i=x(s,l);break;case"SSTF":i=T(s,l);break;case"SCAN":i=P(s,l,a,e);break;case"LOOK":i=R(s,l,e);break;case"CSCAN":i=A(s,l,a,e);break;case"CLOOK":i=M(s,l,e);break;case"NSTEPSCAN":i=B(s,l,a,e);break;case"FSCAN":i=O(s,l,a,e);break;default:i=x(s,l)}this.state.steps=i.steps,this.state.totalSeek=i.totalSeek,this.callbacks.onCalculationDone&&this.callbacks.onCalculationDone(i)}reset(){this.state.currentStepIndex=0,this.state.progress=0,this.state.isFinished=!1,this.state.isPlaying=!1,this.callbacks.onStateChange&&this.callbacks.onStateChange(this.getRenderState())}play(){this.state.isFinished&&this.reset(),this.state.isPlaying=!0,this.lastFrameTime=performance.now(),this.loop()}pause(){this.state.isPlaying=!1,this.animationId&&cancelAnimationFrame(this.animationId)}stop(){this.pause(),this.reset()}setSpeed(t){this.state.speed=t}seek(t){const s=this.state.steps.length-1;if(s<=0)return;const l=t*s;this.state.currentStepIndex=Math.floor(l),this.state.progress=l-Math.floor(l),this.state.isFinished=!1,this.callbacks.onStateChange(this.getRenderState())}loop(t){if(!this.state.isPlaying)return;t||(t=performance.now());const s=(t-this.lastFrameTime)/1e3;this.lastFrameTime=t,this.update(s),this.callbacks.onRender&&this.callbacks.onRender(this.getRenderState()),this.animationId=requestAnimationFrame(this.loop.bind(this))}update(t){if(this.state.currentStepIndex>=this.state.steps.length-1){this.state.isFinished=!0,this.pause();return}const s=this.state.steps[this.state.currentStepIndex],l=this.state.steps[this.state.currentStepIndex+1],a=Math.abs(l.track-s.track),e=this.state.speed*60;let i=.5;a>0?(i=a/e,i<.1&&(i=.1),i>2&&(i=2)):i=.1;const d=t/i;this.state.progress+=d,this.state.progress>=1&&(this.state.progress=0,this.state.currentStepIndex++,this.callbacks.onStepComplete&&this.callbacks.onStepComplete(this.state.steps[this.state.currentStepIndex]))}getRenderState(){if(this.state.steps.length===0)return null;const t=this.state.steps[this.state.currentStepIndex],s=this.state.steps[this.state.currentStepIndex+1];let l=t.track;if(s){const a=this.easeInOutQuad(this.state.progress);l=t.track+(s.track-t.track)*a}return{currentTrack:l,currentStep:t,nextStep:s,progress:this.state.progress,stepIndex:this.state.currentStepIndex,totalSteps:this.state.steps.length,steps:this.state.steps,diskSize:this.state.diskSize}}easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t}}class z{constructor(t,s){this.canvas=t,this.ctx=t.getContext("2d"),this.diskCanvas=s,this.diskCtx=s?s.getContext("2d"):null,this.resize(),window.addEventListener("resize",()=>this.resize())}resize(){const t=window.devicePixelRatio||1,s=this.canvas.parentElement.getBoundingClientRect();if(this.canvas.width=s.width*t,this.canvas.height=s.height*t,this.ctx.scale(t,t),this.width=s.width,this.height=s.height,this.diskCanvas){const l=this.diskCanvas.parentElement.getBoundingClientRect();this.diskCanvas.width=l.width*t,this.diskCanvas.height=l.height*t,this.diskCtx.scale(t,t),this.dWidth=l.width,this.dHeight=l.height}}render(t){t&&(this.ctx.clearRect(0,0,this.width,this.height),this.diskCtx&&this.diskCtx.clearRect(0,0,this.dWidth,this.dHeight),this.drawTimeline(t),this.diskCtx&&this.drawDisk(t))}drawTimeline(t){const{steps:s,currentTrack:l,diskSize:a}=t,e=this.ctx,i=40,d=this.height-i*2,f=(this.width-i*2)/(s.length>1?s.length-1:1);e.strokeStyle="rgba(0, 243, 255, 0.1)",e.lineWidth=1,e.beginPath();for(let o=0;o<=4;o++){const u=i+d*o/4;e.moveTo(i,u),e.lineTo(this.width-i,u),e.fillStyle="#aaa",e.font="10px Rajdhani",e.fillText((o*a/4).toString(),10,i+d*o/4+4)}e.stroke(),e.beginPath(),e.strokeStyle="#00f3ff",e.lineWidth=2,e.shadowBlur=10,e.shadowColor="#00f3ff",s.forEach((o,u)=>{const S=i+u*f,g=i+o.track/a*d;u===0?e.moveTo(S,g):e.lineTo(S,g)}),e.stroke(),e.shadowBlur=0,s.forEach((o,u)=>{const S=i+u*f,g=i+o.track/a*d;(o.description.includes("Serve")||o.description==="Start")&&(e.beginPath(),e.fillStyle="#ff00ff",e.arc(S,g,4,0,Math.PI*2),e.fill())});const h=t.stepIndex+t.progress,c=i+h*f,r=i+l/a*d;e.beginPath(),e.fillStyle="#fff",e.shadowBlur=15,e.shadowColor="#fff",e.arc(c,r,6,0,Math.PI*2),e.fill(),e.shadowBlur=0,e.fillStyle="rgba(0,0,0,0.8)",e.fillRect(c+10,r-20,60,24),e.fillStyle="#0aff00",e.font="bold 12px Rajdhani",e.fillText(`TRK: ${Math.round(l)}`,c+15,r-4),e.beginPath(),e.strokeStyle="rgba(255, 255, 255, 0.2)",e.moveTo(c,i),e.lineTo(c,this.height-i),e.stroke()}drawDisk(t){const s=this.diskCtx,l=this.dWidth/2,a=this.dHeight/2,e=Math.min(l,a)-20,{currentTrack:i,diskSize:d}=t;s.strokeStyle="rgba(0, 243, 255, 0.1)",s.lineWidth=1;for(let h=0;h<5;h++){s.beginPath();const c=e*(h+1)/5;s.arc(l,a,c,0,Math.PI*2),s.stroke()}const p=i/d*e;s.beginPath(),s.strokeStyle="#ff00ff",s.lineWidth=3,s.shadowBlur=10,s.shadowColor="#ff00ff",s.arc(l,a,Math.max(0,p),0,Math.PI*2),s.stroke(),s.shadowBlur=0;const f=performance.now()/1e3;s.save(),s.translate(l,a),s.rotate(f*2),s.strokeStyle="rgba(255, 255, 255, 0.05)";for(let h=0;h<8;h++)s.rotate(Math.PI/4),s.beginPath(),s.moveTo(0,0),s.lineTo(e,0),s.stroke();s.restore()}}const m={algoSelect:document.getElementById("algo-select"),requestInput:document.getElementById("request-input"),btnRandomize:document.getElementById("btn-randomize"),headStart:document.getElementById("head-start"),headVal:document.getElementById("head-val"),btnRun:document.getElementById("btn-run"),btnPlay:document.getElementById("btn-play"),btnPause:document.getElementById("btn-pause"),btnStop:document.getElementById("btn-stop"),simSpeed:document.getElementById("sim-speed"),timelineCanvas:document.getElementById("timeline-canvas"),diskCanvas:document.getElementById("disk-canvas"),scrubber:document.getElementById("scrubber"),logMonitor:document.getElementById("log-monitor"),statTotalSeek:document.getElementById("stat-total-seek"),statAvgSeek:document.getElementById("stat-avg-seek")},C={requests:[],headStart:53,algorithm:"FCFS"};function I(n){const t=document.createElement("div");t.className="log-line",t.textContent=`> ${n}`,m.logMonitor.prepend(t)}const v=new $({onCalculationDone:n=>{I(`Algorithm: ${C.algorithm}`),I(`Total Seek: ${n.totalSeek}`),I(`Steps: ${n.steps.length}`),m.statTotalSeek.textContent=n.totalSeek;const t=n.steps.length>1?(n.totalSeek/(n.steps.length-1)).toFixed(2):0;m.statAvgSeek.textContent=t,m.scrubber.max=1e3,m.scrubber.value=0},onRender:n=>{F.render(n);const t=n.totalSteps-1;if(t>0){const l=(n.stepIndex+n.progress)/t;document.activeElement!==m.scrubber&&(m.scrubber.value=l*1e3)}},onStepComplete:n=>{},onStateChange:n=>{n&&F.render(n)}}),F=new z(m.timelineCanvas,m.diskCanvas);F.resize();m.headStart.addEventListener("input",n=>{m.headVal.textContent=n.target.value,C.headStart=parseInt(n.target.value)});m.btnRandomize.addEventListener("click",()=>{const n=8+Math.floor(Math.random()*10),t=[];for(let s=0;s<n;s++)t.push(Math.floor(Math.random()*199));m.requestInput.value=t.join(", "),I("Generatd Random Sequence")});m.btnRun.addEventListener("click",()=>{E(),v.init({requests:C.requests,headStart:C.headStart,algorithm:m.algoSelect.value,diskSize:200}),v.play(),C.algorithm=m.algoSelect.value});m.btnPlay.addEventListener("click",()=>v.play());m.btnPause.addEventListener("click",()=>v.pause());m.btnStop.addEventListener("click",()=>v.stop());m.simSpeed.addEventListener("input",n=>{v.setSpeed(parseInt(n.target.value))});m.scrubber.addEventListener("input",n=>{const s=parseInt(n.target.value)/1e3;v.seek(s)});function E(){const n=m.requestInput.value;C.requests=n.split(",").map(t=>parseInt(t.trim())).filter(t=>!isNaN(t))}E();v.init({requests:C.requests,headStart:53,algorithm:"FCFS",diskSize:200});F.render(v.getRenderState());const H={FCFS:{title:"First-Come, First-Served (FCFS)",desc:"Requests are addressed in the order they arrive in the disk queue.",pros:"Simple, fair (no starvation).",cons:"Poor performance, high seek time (wild swings)."},SSTF:{title:"Shortest Seek Time First (SSTF)",desc:"Selects the request with the minimum seek time from the current head position.",pros:"Reduces total seek time compared to FCFS.",cons:"May cause starvation for distant requests."},SCAN:{title:"SCAN (Elevator)",desc:" The disk arm starts at one end of the disk, and moves toward the other end, servicing requests, then reverses.",pros:"High throughput, low variance of response time.",cons:"Long wait times for requests at the far end."},LOOK:{title:"LOOK",desc:"Similar to SCAN, but only goes as far as the last request in each direction, then reverses immediately.",pros:"Better than SCAN (avoids useless seek to end).",cons:"Still has directional bias."},CSCAN:{title:"C-SCAN (Circular SCAN)",desc:"Restricts scanning to one direction only. When the end is reached, it jumps to the beginning without servicing.",pros:"Provides more uniform wait time.",cons:"Wasted seek time jumping to start."},CLOOK:{title:"C-LOOK",desc:"Version of C-SCAN that only goes to the last request, then jumps to the first request.",pros:"More efficient than C-SCAN.",cons:"Implementation overhead."},NSTEPSCAN:{title:"N-Step SCAN",desc:"Divides the request queue into sub-queues of N requests. The arm processes each sub-queue one at a time using SCAN. New requests accumulate in the next sub-queue, bounding maximum wait time.",pros:"Prevents arm stickiness, bounds response time, no starvation.",cons:"Slightly lower throughput than pure SCAN when N is small."},FSCAN:{title:"F-SCAN",desc:"Uses two queues: F1 (frozen snapshot of all current requests) and F2 (new arrivals during the scan). The arm services F1 with SCAN, then F2 becomes the new F1.",pros:"Prevents arm stickiness, guarantees service of all requests in F1 before accepting new ones.",cons:"New requests must wait for a full F1 swept cycle."}},q=document.getElementById("education-overlay"),W=document.getElementById("btn-info");W.addEventListener("click",()=>{q.classList.toggle("hidden"),L()});function L(){const n=H[m.algoSelect.value];q.innerHTML=`
      <div class="glass-panel info-card">
         <button class="close-btn" onclick="document.getElementById('education-overlay').classList.add('hidden')">Ã—</button>
         <h2>${n.title}</h2>
         <p>${n.desc}</p>
         <div class="pros-cons">
            <div class="col">
               <h4>PROS</h4>
               <ul>${n.pros.split(",").map(t=>`<li>${t}</li>`).join("")}</ul>
            </div>
             <div class="col">
               <h4>CONS</h4>
               <ul>${n.cons.split(",").map(t=>`<li>${t}</li>`).join("")}</ul>
            </div>
         </div>
      </div>
   `}m.algoSelect.addEventListener("change",()=>{q.classList.contains("hidden")||L()});I("SYSTEM ONLINE. WAITING FOR INPUT.");
