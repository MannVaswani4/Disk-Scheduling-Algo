(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function a(r){if(r.ep)return;r.ep=!0;const e=s(r);fetch(r.href,e)}})();function y(o,t){let s=t,a=0;const r=[];r.push({track:s,seek:0,totalSeek:0,requestsLeft:[...o],description:"Start"});const e=[...o];for(let i=0;i<e.length;i++){const d=e[i],p=Math.abs(d-s);a+=p,s=d,r.push({track:d,seek:p,totalSeek:a,requestsLeft:e.slice(i+1),description:`Seek to ${d}`})}return{steps:r,totalSeek:a}}function C(o,t){let s=t,a=0;const r=[];let e=[...o];for(r.push({track:s,seek:0,totalSeek:0,requestsLeft:[...e],description:"Start"});e.length>0;){let i=1/0,d=-1;for(let f=0;f<e.length;f++){const c=Math.abs(e[f]-s);c<i&&(i=c,d=f)}const p=e[d];a+=i,s=p,e.splice(d,1),r.push({track:p,seek:i,totalSeek:a,requestsLeft:[...e],description:`Seek to ${p} (Dist: ${i})`})}return{steps:r,totalSeek:a}}function w(o,t,s=200,a="right"){let r=t,e=0;const i=[];let d=[...o].sort((n,l)=>n-l),p=d.filter(n=>n<t).sort((n,l)=>l-n),f=d.filter(n=>n>=t).sort((n,l)=>n-l),c=[];a==="right"?(c=[...f],p.length>0&&(c.push(s-1),c=[...c,...p])):(c=[...p],f.length>0&&(c.push(0),c=[...c,...f])),i.push({track:r,seek:0,totalSeek:0,requestsLeft:[...o],description:"Start"});let h=new Set;for(let n=0;n<c.length;n++){const l=c[n],u=Math.abs(l-r);u>0&&(e+=u,r=l,o.includes(l)&&h.add(l),i.push({track:l,seek:u,totalSeek:e,requestsLeft:o.filter(S=>!h.has(S)),description:o.includes(l)?`Serve ${l}`:"Scan to End/Start"}))}return{steps:i,totalSeek:e}}function E(o,t,s="right"){let a=t,r=0;const e=[];let i=[...o].sort((h,n)=>h-n),d=i.filter(h=>h<t).sort((h,n)=>n-h),p=i.filter(h=>h>=t).sort((h,n)=>h-n),f=[];s==="right"?f=[...p,...d]:f=[...d,...p],e.push({track:a,seek:0,totalSeek:0,requestsLeft:[...o],description:"Start"});let c=new Set;for(let h=0;h<f.length;h++){const n=f[h],l=Math.abs(n-a);l>0&&(r+=l,a=n,c.add(n),e.push({track:n,seek:l,totalSeek:r,requestsLeft:o.filter(u=>!c.has(u)),description:`Serve ${n}`}))}return{steps:e,totalSeek:r}}function L(o,t,s=200,a="right"){let r=t,e=0;const i=[];let d=[...o].sort((n,l)=>n-l),p=d.filter(n=>n>=t),f=d.filter(n=>n<t),c=[];a==="right"?(c=[...p],f.length>0&&(c.push(s-1),c.push(0),c=[...c,...f])):(c=[...d.filter(n=>n<=t).sort((n,l)=>l-n)],d.filter(n=>n>t).length>0&&(c.push(0),c.push(s-1),c=[...c,...d.filter(n=>n>t).sort((n,l)=>l-n)])),i.push({track:r,seek:0,totalSeek:0,requestsLeft:[...o],description:"Start"});let h=new Set;for(let n=0;n<c.length;n++){const l=c[n];let u=Math.abs(l-r),S=!1;(a==="right"&&r===s-1&&l===0||a==="left"&&r===0&&l===s-1)&&(u=0,S=!0),u>=0&&(e+=u,r=l,o.includes(l)&&h.add(l),i.push({track:l,seek:u,totalSeek:e,requestsLeft:o.filter(b=>!h.has(b)),description:S?"Jump to Start":o.includes(l)?`Serve ${l}`:"Scan"}))}return{steps:i,totalSeek:e}}function F(o,t,s="right"){let a=t,r=0;const e=[];let i=[...o].sort((h,n)=>h-n),d=i.filter(h=>h>=t),p=i.filter(h=>h<t),f=[];if(s==="right")f=[...d,...p];else{let h=i.filter(l=>l<=t).sort((l,u)=>u-l),n=i.filter(l=>l>t).sort((l,u)=>u-l);f=[...h,...n]}e.push({track:a,seek:0,totalSeek:0,requestsLeft:[...o],description:"Start"});let c=new Set;for(let h=0;h<f.length;h++){const n=f[h];let l=Math.abs(n-a),u=!1;s==="right"&&d.length>0&&p.length>0&&a===d[d.length-1]&&n===p[0]&&(l=0,u=!0),s==="right"&&n<a&&(l=0,u=!0),s==="left"&&n>a&&(l=0,u=!0),r+=l,a=n,c.add(n),e.push({track:n,seek:l,totalSeek:r,requestsLeft:o.filter(S=>!c.has(S)),description:u?"Jump":`Serve ${n}`})}return{steps:e,totalSeek:r}}class P{constructor(t){this.callbacks=t||{},this.state={requests:[],headStart:53,diskSize:200,direction:"right",algorithm:"FCFS",steps:[],totalSeek:0,currentStepIndex:0,progress:0,isPlaying:!1,speed:1,isFinished:!1},this.lastFrameTime=0,this.animationId=null}init(t){this.stop(),this.state.requests=t.requests||[],this.state.headStart=t.headStart||0,this.state.diskSize=t.diskSize||200,this.state.direction=t.direction||"right",this.state.algorithm=t.algorithm||"FCFS",this.calculate(),this.reset()}calculate(){const{algorithm:t,requests:s,headStart:a,diskSize:r,direction:e}=this.state;let i;switch(t){case"FCFS":i=y(s,a);break;case"SSTF":i=C(s,a);break;case"SCAN":i=w(s,a,r,e);break;case"LOOK":i=E(s,a,e);break;case"CSCAN":i=L(s,a,r,e);break;case"CLOOK":i=F(s,a,e);break;default:i=y(s,a)}this.state.steps=i.steps,this.state.totalSeek=i.totalSeek,this.callbacks.onCalculationDone&&this.callbacks.onCalculationDone(i)}reset(){this.state.currentStepIndex=0,this.state.progress=0,this.state.isFinished=!1,this.state.isPlaying=!1,this.callbacks.onStateChange&&this.callbacks.onStateChange(this.getRenderState())}play(){this.state.isFinished&&this.reset(),this.state.isPlaying=!0,this.lastFrameTime=performance.now(),this.loop()}pause(){this.state.isPlaying=!1,this.animationId&&cancelAnimationFrame(this.animationId)}stop(){this.pause(),this.reset()}setSpeed(t){this.state.speed=t}seek(t){const s=this.state.steps.length-1;if(s<=0)return;const a=t*s;this.state.currentStepIndex=Math.floor(a),this.state.progress=a-Math.floor(a),this.state.isFinished=!1,this.callbacks.onStateChange(this.getRenderState())}loop(t){if(!this.state.isPlaying)return;t||(t=performance.now());const s=(t-this.lastFrameTime)/1e3;this.lastFrameTime=t,this.update(s),this.callbacks.onRender&&this.callbacks.onRender(this.getRenderState()),this.animationId=requestAnimationFrame(this.loop.bind(this))}update(t){if(this.state.currentStepIndex>=this.state.steps.length-1){this.state.isFinished=!0,this.pause();return}const s=this.state.steps[this.state.currentStepIndex],a=this.state.steps[this.state.currentStepIndex+1],r=Math.abs(a.track-s.track),e=this.state.speed*60;let i=.5;r>0?(i=r/e,i<.1&&(i=.1),i>2&&(i=2)):i=.1;const d=t/i;this.state.progress+=d,this.state.progress>=1&&(this.state.progress=0,this.state.currentStepIndex++,this.callbacks.onStepComplete&&this.callbacks.onStepComplete(this.state.steps[this.state.currentStepIndex]))}getRenderState(){if(this.state.steps.length===0)return null;const t=this.state.steps[this.state.currentStepIndex],s=this.state.steps[this.state.currentStepIndex+1];let a=t.track;if(s){const r=this.easeInOutQuad(this.state.progress);a=t.track+(s.track-t.track)*r}return{currentTrack:a,currentStep:t,nextStep:s,progress:this.state.progress,stepIndex:this.state.currentStepIndex,totalSteps:this.state.steps.length,steps:this.state.steps,diskSize:this.state.diskSize}}easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t}}class T{constructor(t,s){this.canvas=t,this.ctx=t.getContext("2d"),this.diskCanvas=s,this.diskCtx=s?s.getContext("2d"):null,this.resize(),window.addEventListener("resize",()=>this.resize())}resize(){const t=window.devicePixelRatio||1,s=this.canvas.parentElement.getBoundingClientRect();if(this.canvas.width=s.width*t,this.canvas.height=s.height*t,this.ctx.scale(t,t),this.width=s.width,this.height=s.height,this.diskCanvas){const a=this.diskCanvas.parentElement.getBoundingClientRect();this.diskCanvas.width=a.width*t,this.diskCanvas.height=a.height*t,this.diskCtx.scale(t,t),this.dWidth=a.width,this.dHeight=a.height}}render(t){t&&(this.ctx.clearRect(0,0,this.width,this.height),this.diskCtx&&this.diskCtx.clearRect(0,0,this.dWidth,this.dHeight),this.drawTimeline(t),this.diskCtx&&this.drawDisk(t))}drawTimeline(t){const{steps:s,currentTrack:a,diskSize:r}=t,e=this.ctx,i=40,d=this.height-i*2,f=(this.width-i*2)/(s.length>1?s.length-1:1);e.strokeStyle="rgba(0, 243, 255, 0.1)",e.lineWidth=1,e.beginPath();for(let l=0;l<=4;l++){const u=i+d*l/4;e.moveTo(i,u),e.lineTo(this.width-i,u),e.fillStyle="#aaa",e.font="10px Rajdhani",e.fillText((l*r/4).toString(),10,i+d*l/4+4)}e.stroke(),e.beginPath(),e.strokeStyle="#00f3ff",e.lineWidth=2,e.shadowBlur=10,e.shadowColor="#00f3ff",s.forEach((l,u)=>{const S=i+u*f,b=i+l.track/r*d;u===0?e.moveTo(S,b):e.lineTo(S,b)}),e.stroke(),e.shadowBlur=0,s.forEach((l,u)=>{const S=i+u*f,b=i+l.track/r*d;(l.description.includes("Serve")||l.description==="Start")&&(e.beginPath(),e.fillStyle="#ff00ff",e.arc(S,b,4,0,Math.PI*2),e.fill())});const c=t.stepIndex+t.progress,h=i+c*f,n=i+a/r*d;e.beginPath(),e.fillStyle="#fff",e.shadowBlur=15,e.shadowColor="#fff",e.arc(h,n,6,0,Math.PI*2),e.fill(),e.shadowBlur=0,e.fillStyle="rgba(0,0,0,0.8)",e.fillRect(h+10,n-20,60,24),e.fillStyle="#0aff00",e.font="bold 12px Rajdhani",e.fillText(`TRK: ${Math.round(a)}`,h+15,n-4),e.beginPath(),e.strokeStyle="rgba(255, 255, 255, 0.2)",e.moveTo(h,i),e.lineTo(h,this.height-i),e.stroke()}drawDisk(t){const s=this.diskCtx,a=this.dWidth/2,r=this.dHeight/2,e=Math.min(a,r)-20,{currentTrack:i,diskSize:d}=t;s.strokeStyle="rgba(0, 243, 255, 0.1)",s.lineWidth=1;for(let c=0;c<5;c++){s.beginPath();const h=e*(c+1)/5;s.arc(a,r,h,0,Math.PI*2),s.stroke()}const p=i/d*e;s.beginPath(),s.strokeStyle="#ff00ff",s.lineWidth=3,s.shadowBlur=10,s.shadowColor="#ff00ff",s.arc(a,r,Math.max(0,p),0,Math.PI*2),s.stroke(),s.shadowBlur=0;const f=performance.now()/1e3;s.save(),s.translate(a,r),s.rotate(f*2),s.strokeStyle="rgba(255, 255, 255, 0.05)";for(let c=0;c<8;c++)s.rotate(Math.PI/4),s.beginPath(),s.moveTo(0,0),s.lineTo(e,0),s.stroke();s.restore()}}const g={algoSelect:document.getElementById("algo-select"),requestInput:document.getElementById("request-input"),btnRandomize:document.getElementById("btn-randomize"),headStart:document.getElementById("head-start"),headVal:document.getElementById("head-val"),btnRun:document.getElementById("btn-run"),btnPlay:document.getElementById("btn-play"),btnPause:document.getElementById("btn-pause"),btnStop:document.getElementById("btn-stop"),simSpeed:document.getElementById("sim-speed"),timelineCanvas:document.getElementById("timeline-canvas"),diskCanvas:document.getElementById("disk-canvas"),scrubber:document.getElementById("scrubber"),logMonitor:document.getElementById("log-monitor"),statTotalSeek:document.getElementById("stat-total-seek"),statAvgSeek:document.getElementById("stat-avg-seek")},m={requests:[],headStart:53,algorithm:"FCFS"};function I(o){const t=document.createElement("div");t.className="log-line",t.textContent=`> ${o}`,g.logMonitor.prepend(t)}const k=new P({onCalculationDone:o=>{I(`Algorithm: ${m.algorithm}`),I(`Total Seek: ${o.totalSeek}`),I(`Steps: ${o.steps.length}`),g.statTotalSeek.textContent=o.totalSeek;const t=o.steps.length>1?(o.totalSeek/(o.steps.length-1)).toFixed(2):0;g.statAvgSeek.textContent=t,g.scrubber.max=1e3,g.scrubber.value=0},onRender:o=>{v.render(o);const t=o.totalSteps-1;if(t>0){const a=(o.stepIndex+o.progress)/t;document.activeElement!==g.scrubber&&(g.scrubber.value=a*1e3)}},onStepComplete:o=>{},onStateChange:o=>{o&&v.render(o)}}),v=new T(g.timelineCanvas,g.diskCanvas);v.resize();g.headStart.addEventListener("input",o=>{g.headVal.textContent=o.target.value,m.headStart=parseInt(o.target.value)});g.btnRandomize.addEventListener("click",()=>{const o=8+Math.floor(Math.random()*10),t=[];for(let s=0;s<o;s++)t.push(Math.floor(Math.random()*199));g.requestInput.value=t.join(", "),I("Generatd Random Sequence")});g.btnRun.addEventListener("click",()=>{x(),k.init({requests:m.requests,headStart:m.headStart,algorithm:g.algoSelect.value,diskSize:200}),k.play(),m.algorithm=g.algoSelect.value});g.btnPlay.addEventListener("click",()=>k.play());g.btnPause.addEventListener("click",()=>k.pause());g.btnStop.addEventListener("click",()=>k.stop());g.simSpeed.addEventListener("input",o=>{k.setSpeed(parseInt(o.target.value))});g.scrubber.addEventListener("input",o=>{const s=parseInt(o.target.value)/1e3;k.seek(s)});function x(){const o=g.requestInput.value;m.requests=o.split(",").map(t=>parseInt(t.trim())).filter(t=>!isNaN(t))}x();k.init({requests:m.requests,headStart:53,algorithm:"FCFS",diskSize:200});v.render(k.getRenderState());I("SYSTEM ONLINE. WAITING FOR INPUT.");
